#!/bin/bash
whois $1 | awk '/^Registrant |^Admin |^Tech /{t=$1} /^Registrant Name:|^Admin Name:|^Tech Name:/{print t" Name, "substr($0,index($0,$3))} /^Registrant Organization:|^Admin Organization:|^Tech Organization:/{print t" Organization, "substr($0,index($0,$3))} /^Registrant Street:|^Admin Street:|^Tech Street:/{printf "%s Street, %s \n",t,substr($0,index($0,$3))} /^Registrant City:|^Admin City:|^Tech City:/{print t" City, "substr($0,index($0,$3))} /^Registrant State\/Province:|^Admin State\/Province:|^Tech State\/Province:/{print t" State/Province, "substr($0,index($0,$3))} /^Registrant Postal Code:|^Admin Postal Code:|^Tech Postal Code:/{print t" Postal Code, "substr($0,index($0,$4))} /^Registrant Country:|^Admin Country:|^Tech Country:/{print t" Country, "substr($0,index($0,$3))} /^Registrant Phone:|^Admin Phone:|^Tech Phone:/{print t" Phone, "substr($0,index($0,$3))} /^Registrant Phone Ext:|^Admin Phone Ext:|^Tech Phone Ext:/{print t" Phone Ext:,"} /^Registrant Fax:|^Admin Fax:|^Tech Fax:/{print t" Fax,"} /^Registrant Fax Ext:|^Admin Fax Ext:|^Tech Fax Ext:/{print t" Fax Ext:,"} /^Registrant Email:|^Admin Email:|^Tech Email:/{print t" Email, "substr($0,index($0,$3))}' > $1.csv
